char Bufer[11];
int datoMalo=0;
int posicion=0;
int terminadoRDA=0;
int timeOut=0;
unsigned int16 contador15s=0;
int8 punto=0;
int tamanoBufer=11;

void ingresarDatos();
void ingresarDatos()
{   
      
      While(terminadoRDA==0);                   //Mientras no aya terminado de recivir la trama se queda ciclado
      contador15s=0;                            //Reinicia el contador15s

}

#int_rda
void rda_isr()
{     
      Bufer[posicion]=getc();                     //Guarda lo tecleado en el Bufer en la posicion actual
      disable_interrupts(int_TIMER0);            //Desactiva la interrupción de TMR0
      contador15s=0;
      if(Bufer[posicion]==0x0A || Bufer[posicion]==0x0D)     //Si recivio enter
      {
         terminadoRDA=1;
      }
      if(!(posicion<tamanoBufer-1))                         //Si no es menor de 9 (la ultima posición del vector para escribir), activa bandera para que termine la interrupción
      {
         terminadoRDA=1;
      }
      if(((Bufer[posicion]<'0' || Bufer[posicion]>'9') && (Bufer[posicion]!='-') && (Bufer[posicion]!='.') && (Bufer[posicion]!=0x0A && Bufer[posicion]!=0x0D)) || (posicion>0 && Bufer[posicion]=='-') || (punto>1))     //Si no ingreso un numero, un - o un .   El dato no es valido
      {
         datoMalo=1;
      }
      if(Bufer[posicion]=='.')
      {
         punto++;
      }
      posicion++;
      enable_interrupts(int_TIMER0);                  //Habilita la interrupcion de TMR0

}
#int_timer0
void contador_TMR0()
{
   if(contador15s>=916)
   {
      terminadoRDA=1;
      datoMalo=1;
      timeOut=1;
   }
   contador15s++;
}
